# iTerm2 ç»ˆç«¯é…ç½®ä¸ä¸»é¢˜ä¼˜åŒ–å…¨è®°å½•

## ä¸€ã€åˆå§‹é—®é¢˜

### 1.1 é—®é¢˜ç°è±¡
- ç»ˆç«¯æ˜¾ç¤ºä¹±ç ï¼Œå„ç§å­—ç¬¦æ˜¾ç¤ºä¸ºæ–¹å—æˆ–é—®å·
- ä¸»é¢˜æ˜¾ç¤ºä¸å¤Ÿç¾è§‚
- Conda base ç¯å¢ƒé‡å¤æ˜¾ç¤º

### 1.2 æ ¹æœ¬åŸå› 
1. **å­—ä½“é—®é¢˜**ï¼šç¼ºå°‘æ”¯æŒå®Œæ•´ Unicode å­—ç¬¦é›†çš„ç¼–ç¨‹å­—ä½“
2. **ä¸»é¢˜é…ç½®**ï¼šé»˜è®¤ä¸»é¢˜åŠŸèƒ½æœ‰é™ï¼Œä¸å¤Ÿç¾è§‚
3. **ç¯å¢ƒæ˜¾ç¤º**ï¼šconda è‡ªåŠ¨æ¿€æ´» base ç¯å¢ƒé€ æˆé‡å¤æ˜¾ç¤º

## äºŒã€è§£å†³è¿‡ç¨‹ä¸é‡åˆ°çš„é”™è¯¯

### 2.1 å­—ä½“å®‰è£…ï¼ˆæˆåŠŸï¼‰

```bash
# å®‰è£…ç¼–ç¨‹ä¸“ç”¨å­—ä½“
brew install --cask font-meslo-lg-nerd-font font-jetbrains-mono-nerd-font font-fira-code-nerd-font
```

### 2.2 ä¸»é¢˜åˆ‡æ¢é—®é¢˜ï¼ˆå¤šæ¬¡å¤±è´¥ï¼‰

#### é”™è¯¯ 1ï¼šä¸»é¢˜å¾ªç¯åˆ‡æ¢
```bash
# é—®é¢˜ï¼šCURRENT_THEME å˜é‡è®¾ç½®é”™è¯¯
# é”™è¯¯ä»£ç ç¤ºä¾‹ï¼š
powerlevel10k)
  CURRENT_THEME="spaceship"  # é”™è¯¯ï¼åº”è¯¥æ˜¯ "powerlevel10k"
```

#### é”™è¯¯ 2ï¼šå¤æ‚çš„ä¸»é¢˜åˆ‡æ¢å™¨
- åˆ›å»ºäº†è¿‡äºå¤æ‚çš„ä¸»é¢˜åˆ‡æ¢ç³»ç»Ÿ
- å¤šä¸ªé…ç½®æ–‡ä»¶äº’ç›¸å†²çª
- å‡½æ•°å†…éƒ¨å˜é‡è®¾ç½®é”™è¯¯

#### é”™è¯¯ 3ï¼šPowerlevel10k é…ç½®è¦†ç›–
- conda ç¯å¢ƒæ£€æµ‹ä»ç„¶æ˜¾ç¤º base
- è‡ªå®šä¹‰å‡½æ•°è¢«é»˜è®¤é…ç½®è¦†ç›–

### 2.3 æœ€ç»ˆè§£å†³æ–¹æ¡ˆ

é‡‡ç”¨æœ€ç®€å•çš„æ–¹æ¡ˆï¼šç›´æ¥ä½¿ç”¨ Powerlevel10k ä½œä¸ºé»˜è®¤ä¸»é¢˜ï¼Œé€šè¿‡é…ç½®æ–‡ä»¶è‡ªå®šä¹‰æ˜¾ç¤ºã€‚

## ä¸‰ã€æœ€ä½³å®è·µ

### 3.1 ä¿æŒç®€å•
- ä¸è¦è¿‡åº¦å¤æ‚çš„ä¸»é¢˜åˆ‡æ¢ç³»ç»Ÿ
- é€‰æ‹©ä¸€ä¸ªæ»¡æ„çš„ä¸»é¢˜å¹¶åšæŒä½¿ç”¨
- é€šè¿‡ä¸»é¢˜è‡ªèº«çš„é…ç½®ç³»ç»Ÿè¿›è¡Œå®šåˆ¶

### 3.2 å­—ä½“é€‰æ‹©å»ºè®®
æ¨èå­—ä½“ä¼˜å…ˆçº§ï¼š
1. **MesloLGS NF** - æœ€é€‚åˆç»ˆç«¯ï¼Œç­‰å®½ä¸”ç¾è§‚
2. **JetBrains Mono NF** - æ¸…æ™°æ˜“è¯»ï¼Œç¨‹åºå‘˜å‹å¥½
3. **Fira Code NF** - æ”¯æŒè¿å­—ç¬¦ï¼Œä»£ç ç¾è§‚

### 3.3 Conda ç¯å¢ƒç®¡ç†
```bash
# ç¦ç”¨ base ç¯å¢ƒè‡ªåŠ¨æ¿€æ´»
conda config --set auto_activate_base false

# æ‰‹åŠ¨æ¿€æ´»ç¯å¢ƒ
conda activate myenv
```

## å››ã€æœ€ç»ˆé…ç½®æ–‡ä»¶

### 4.1 ~/.zshrc é…ç½®

```bash
# Enable Powerlevel10k instant prompt. Should stay close to the top of ~/.zshrc.
# Initialization code that may require console input (password prompts, [y/n]
# confirmations, etc.) must go above this block; everything else may go below.
if [[ -r "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh" ]]; then
  source "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh"
fi

# If you come from bash you might have to change your $PATH.

# export PATH=$HOME/bin:/usr/local/bin:$PATH

# Add Homebrew to PATH
export PATH="/opt/homebrew/bin:$PATH"

# Path to your oh-my-zsh installation.
export ZSH="$HOME/.oh-my-zsh"

# Set name of the theme to load --- if set to "random", it will
# load a random theme each time oh-my-zsh is loaded, in which case,
# to know which specific one was loaded, run: echo $RANDOM_THEME
# See https://github.com/ohmyzsh/ohmyzsh/wiki/Themes
ZSH_THEME="powerlevel10k/powerlevel10k"

# ... (å…¶ä»– oh-my-zsh é…ç½®ä¿æŒä¸å˜) ...

# To customize prompt, run `p10k configure` or edit ~/.p10k.zsh.
[[ ! -f ~/.p10k.zsh ]] || source ~/.p10k.zsh

# Claude Code ç¯å¢ƒåˆ‡æ¢å‡½æ•°
claude-gpt2s() {
    echo "ğŸ”„ åˆ‡æ¢åˆ° gpt2share ç¯å¢ƒ..."
    cp ~/.claude-configs/gpt2share/.claude.json ~/
    cp ~/.claude-configs/gpt2share/settings.json ~/.claude/
    echo "âœ… å·²åˆ‡æ¢åˆ° gpt2share (http://45.153.246.116:5201/api)"
    command claude "$@"
}

claude-zhipu() {
    echo "ğŸ”„ åˆ‡æ¢åˆ° zhipu ç¯å¢ƒ..."
    cp ~/.claude-configs/zhipu/.claude.json ~/
    cp ~/.claude-configs/zhipu/settings.json ~/.claude/
    echo "âœ… å·²åˆ‡æ¢åˆ° zhipu (https://open.bigmodel.cn/api/anthropic)"
    command claude "$@"
}

# é»˜è®¤ claude ä½¿ç”¨ zhipu ç¯å¢ƒ
alias claude='claude-zhipu'
```

### 4.2 ~/.p10k.zsh é…ç½®ï¼ˆå…³é”®éƒ¨åˆ†ï¼‰

```bash
# Generated by Powerlevel10k configuration wizard on 2025-12-15 at 23:52 CST.
# Based on romkatv/powerlevel10k/config/p10k-rainbow.zsh, checksum 49619.

# å·¦ä¾§æç¤ºç¬¦å…ƒç´ 
typeset -g POWERLEVEL9K_LEFT_PROMPT_ELEMENTS=(
  # =========================[ Line #1 ]=========================
  os_icon                 # os identifier
  dir                     # current directory
  vcs                     # git status
  # =========================[ Line #2 ]=========================
  newline                 # \n
  prompt_char             # prompt symbol
)

# å³ä¾§æç¤ºç¬¦å…ƒç´ 
typeset -g POWERLEVEL9K_RIGHT_PROMPT_ELEMENTS=(
  # =========================[ Line #1 ]=========================
  status                  # exit code of the last command
  command_execution_time  # duration of the last command
  background_jobs         # presence of background jobs
  direnv                  # direnv status (https://direnv.net/)
  asdf                    # asdf version manager (https://github.com/asdf-vm/asdf)
  virtualenv              # python virtual environment (https://docs.python.org/3/library/venv.html)
  anaconda                # custom conda environment (hides base)
  pyenv                   # python environment (https://github.com/pyenv/pyenv)
  goenv                   # go environment (https://github.com/syndbg/goenv)
  nodenv                  # node.js version from nodenv (https://github.com/nodenv/nodenv)
  nvm                     # node.js version from nvm (https://github.com/nvm-sh/nvm)
  nodeenv                 # node.js environment (https://github.com/ekalinin/nodeenv)
  # ... (å…¶ä»–å…ƒç´ ä¿æŒä¸å˜) ...
  time                    # current time
  # =========================[ Line #2 ]=========================
  newline
)

# Custom icon.
# typeset -g POWERLEVEL9K_OS_ICON_CONTENT_EXPANSION='â­'

################################[ prompt_char: prompt symbol ]################################
# Transparent background.
typeset -g POWERLEVEL9K_PROMPT_CHAR_BACKGROUND=
# Green prompt symbol if the last command succeeded.
typeset -g POWERLEVEL9K_PROMPT_CHAR_OK_{VIINS,VICMD,VIVIS,VIOWR}_FOREGROUND=76
# Red prompt symbol if the last command failed.
typeset -g POWERLEVEL9K_PROMPT_CHAR_ERROR_{VIINS,VICMD,VIVIS,VIOWR}_FOREGROUND=196
# Default prompt symbol.
typeset -g POWERLEVEL9K_PROMPT_CHAR_{OK,ERROR}_VIINS_CONTENT_EXPANSION='â¯'
# Prompt symbol in command vi mode.
typeset -g POWERLEVEL9K_PROMPT_CHAR_{OK,ERROR}_VICMD_CONTENT_EXPANSION='â®'

##################################[ dir: current directory ]##################################
# Current directory background color.
typeset -g POWERLEVEL9K_DIR_BACKGROUND=4
# Default current directory foreground color.
typeset -g POWERLEVEL9K_DIR_FOREGROUND=254
# If directory is too long, shorten some of its segments to the shortest possible unique
# prefix. The shortened directory can be tab-completed to the original.
typeset -g POWERLEVEL9K_SHORTEN_STRATEGY=truncate_to_unique
# Replace removed segment suffixes with this symbol.
typeset -g POWERLEVEL9K_SHORTEN_DELIMITER=
# Color of the shortened directory segments.
typeset -g POWERLEVEL9K_DIR_SHORTENED_FOREGROUND=250
# Color of the anchor directory segments. Anchor segments are never shortened. The first
# segment is always an anchor.
typeset -g POWERLEVEL9K_DIR_ANCHOR_FOREGROUND=255
# Display anchor directory segments in bold.
typeset -g POWERLEVEL9K_DIR_ANCHOR_BOLD=true

#####################################[ vcs: git status ]######################################
# Version control background colors.
typeset -g POWERLEVEL9K_VCS_CLEAN_BACKGROUND=2
typeset -g POWERLEVEL9K_VCS_MODIFIED_BACKGROUND=3
typeset -g POWERLEVEL9K_VCS_UNTRACKED_BACKGROUND=2
typeset -g POWERLEVEL9K_VCS_CONFLICTED_BACKGROUND=3
typeset -g POWERLEVEL9K_VCS_LOADING_BACKGROUND=8

# Branch icon. Set this parameter to '\UE0A0 ' for the popular Powerline branch icon.
typeset -g POWERLEVEL9K_VCS_BRANCH_ICON='\uF126 '

# Untracked files icon. It's really a question mark, your font isn't broken.
# Change the value of this parameter to show a different icon.
typeset -g POWERLEVEL9K_VCS_UNTRACKED_ICON='?'

#####################[ anaconda: conda environment (https://conda.io/) ]######################
# Anaconda environment color.
typeset -g POWERLEVEL9K_ANACONDA_FOREGROUND=0
typeset -g POWERLEVEL9K_ANACONDA_BACKGROUND=4

# Hide base environment - only show non-base conda environments
function prompt_anaconda() {
  [[ -n "$CONDA_DEFAULT_ENV" && "$CONDA_DEFAULT_ENV" != "base" ]] || return 1
  p10k segment -b 4 -f 0 -t "${CONDA_DEFAULT_ENV}"
}

# Custom icon.
# typeset -g POWERLEVEL9K_ANACONDA_VISUAL_IDENTIFIER_EXPANSION='â­'

####################################[ time: current time ]####################################
# Current time color.
typeset -g POWERLEVEL9K_TIME_FOREGROUND=0
typeset -g POWERLEVEL9K_TIME_BACKGROUND=7
# Format for the current time: 09:51:02. See `man 3 strftime`.
typeset -g POWERLEVEL9K_TIME_FORMAT='%D{%H:%M:%S}'
# If set to true, time will update when you hit enter.
typeset -g POWERLEVEL9K_TIME_UPDATE_ON_COMMAND=false

# Transient prompt works similarly to the builtin transient_rprompt option.
typeset -g POWERLEVEL9K_TRANSIENT_PROMPT=always

# Hot reload allows you to change POWERLEVEL9K options after Powerlevel10k has been initialized.
typeset -g POWERLEVEL9K_DISABLE_HOT_RELOAD=true
```

### 4.3 iTerm2 å­—ä½“é…ç½®

åœ¨ iTerm2 ä¸­è®¾ç½®ï¼š
1. **Preferences â†’ Profiles â†’ Text**
2. **Font**: MesloLGS NF Regular
3. **Size**: 14-16pt
4. **å¯ç”¨é€‰é¡¹**ï¼š
   - âœ… Use ligaturesï¼ˆå¦‚ä½¿ç”¨ Fira Codeï¼‰
   - âœ… Antialias text
   - âœ… Treat ambiguous-width characters as double width

### 4.4 Conda é…ç½®

```bash
# ~/.condarc æ–‡ä»¶å†…å®¹
channels:
  - defaults
  - conda-forge

auto_activate_base: false  # å…³é”®ï¼šç¦ç”¨è‡ªåŠ¨æ¿€æ´» base ç¯å¢ƒ
```

## äº”ã€Powerlevel10k ä½¿ç”¨æ–¹æ³•

### 5.1 åŸºæœ¬ä½¿ç”¨

1. **é‡æ–°é…ç½®å¤–è§‚**ï¼š
   ```bash
   p10k configure
   ```

2. **å³æ—¶æç¤ºç¬¦**ï¼š
   - å‘½ä»¤æ‰§è¡Œåï¼Œæç¤ºç¬¦ä¼šè‡ªåŠ¨ç®€åŒ–ï¼Œåªæ˜¾ç¤ºå¿…è¦çš„éƒ¨åˆ†
   - è¾“å…¥å‘½ä»¤æ—¶ä¼šå®Œæ•´æ˜¾ç¤º

3. **é¢œè‰²è¯´æ˜**ï¼š
   - ğŸŸ¢ ç»¿è‰²ï¼šGit ä»“åº“å¹²å‡€
   - ğŸŸ¡ é»„è‰²ï¼šæœ‰æœªæäº¤çš„æ›´æ”¹
   - ğŸ”´ çº¢è‰²ï¼šæœ‰å†²çª

### 5.2 è‡ªå®šä¹‰æŠ€å·§

1. **ä¿®æ”¹æ—¶é—´æ ¼å¼**ï¼š
   ```bash
   typeset -g POWERLEVEL9K_TIME_FORMAT='%D{%H:%M}'  # åªæ˜¾ç¤ºå°æ—¶å’Œåˆ†é’Ÿ
   ```

2. **éšè—æŸäº›å…ƒç´ **ï¼š
   ```bash
   # åœ¨ ~/.p10k.zsh ä¸­æ³¨é‡Šæ‰ä¸éœ€è¦çš„å…ƒç´ 
   # typeset -g POWERLEVEL9K_COMMAND_EXECUTION_TIME_BACKGROUND=3
   ```

3. **è‡ªå®šä¹‰å›¾æ ‡**ï¼š
   ```bash
   typeset -g POWERLEVEL9K_VCS_BRANCH_ICON='â‡ '
   ```

## å…­ã€å¸¸è§é—®é¢˜è§£å†³

### 6.1 ä¹±ç é—®é¢˜
- ç¡®ä¿ä½¿ç”¨ Nerd Font å­—ä½“
- æ£€æŸ¥ iTerm2 çš„ç¼–ç è®¾ç½®ï¼ˆåº”ä¸º Unicode UTF-8ï¼‰

### 6.2 Conda ç¯å¢ƒæ˜¾ç¤ºé—®é¢˜
- ä½¿ç”¨è‡ªå®šä¹‰çš„ `prompt_anaconda()` å‡½æ•°
- è®¾ç½® `auto_activate_base: false`

### 6.3 ä¸»é¢˜åˆ‡æ¢é—®é¢˜
- é¿å…å¤æ‚çš„å¤šä¸»é¢˜åˆ‡æ¢ç³»ç»Ÿ
- ç›´æ¥åœ¨ `.zshrc` ä¸­è®¾ç½® `ZSH_THEME`

## ä¸ƒã€æ¨èè®¾ç½®æ€»ç»“

1. **å­—ä½“**ï¼šMesloLGS NF (14-16pt)
2. **ä¸»é¢˜**ï¼šPowerlevel10k (rainbow é…ç½®)
3. **Conda**ï¼šç¦ç”¨ base è‡ªåŠ¨æ¿€æ´»
4. **å³æ—¶æç¤ºç¬¦**ï¼šå¯ç”¨ (`always`)
5. **Git é›†æˆ**ï¼šé»˜è®¤é…ç½®å³å¯

è¿™æ ·çš„é…ç½®æ—¢ç¾è§‚åˆå®ç”¨ï¼Œè§£å†³äº†ä¹±ç é—®é¢˜ï¼Œéšè—äº†ä¸å¿…è¦çš„ base ç¯å¢ƒæ˜¾ç¤ºï¼Œå¹¶æä¾›äº†ä¸°å¯Œçš„ä¿¡æ¯å±•ç¤ºã€‚